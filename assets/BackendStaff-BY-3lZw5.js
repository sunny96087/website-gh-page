import{_ as j,r as i,x as C,c as r,d as b,f as a,F as q,i as H,P as o,q as f,A as p,C as _,B as g,Q as V,h as L,s as Q,t as x,p as R,k as Y}from"./index-GDSJuxS6.js";import{C as G}from"./ConfirmDialog-9_NHGn4X.js";const d=m=>(R("data-v-336761e2"),m=m(),Y(),m),J={class:"backend-block-flex"},K={class:"backend-page-title"},O=d(()=>a("div",{class:""},"管理人員",-1)),W={class:"rounded-md shadow overflow-hidden"},X=Q('<div class="backend-table-header" data-v-336761e2><label class="backend-table-header-label col-span-3" data-v-336761e2>名稱 </label><label class="backend-table-header-label col-span-3" data-v-336761e2>帳號 </label><label class="backend-table-header-label col-span-2" data-v-336761e2>權限 </label><label class="backend-table-header-label col-span-2" data-v-336761e2>功能 </label></div>',1),aa={class:"backend-table-body-label col-span-3"},ea={class:"backend-table-body-label col-span-3"},sa={class:"backend-table-body-label col-span-2"},ta={class:"backend-table-body-label col-span-2 flex justify-center gap-2"},la=["onClick"],na=["onClick"],oa={key:0,class:"backend-edit-overlay"},fa={class:"backend-edit-modal"},da={class:"backend-edit-modal-content backend-block-flex"},ua=d(()=>a("div",{class:"backend-page-title"},"編輯管理員",-1)),ia=d(()=>a("span",{class:"label-note"},"* 請使用英數組成",-1)),ca=d(()=>a("span",{class:"label-note"},"* 請使用英數組成，最少 6 碼",-1)),ra=d(()=>a("label",null,"權限",-1)),pa=d(()=>a("span",{class:"label-note"},[o("information "),a("span",{class:"tooltip-text"},[o("一級權限: 可編輯權限，可新增修改刪除管理員。 "),a("br"),o(" 二級權限: 可新增修改刪除管理員。"),a("br"),o(" 三級權限: 無編輯管理員權限。")])],-1)),_a={class:"flex gap-4"},va={key:1,class:"backend-edit-overlay"},ba={class:"backend-edit-modal"},ma={class:"backend-edit-modal-content backend-block-flex"},ka=d(()=>a("div",{class:"backend-page-title"},"新增管理員",-1)),wa=d(()=>a("span",{class:"label-note"},"* 必填",-1)),ha=d(()=>a("span",{class:"label-note"},"* 請使用英數組成",-1)),ga=d(()=>a("span",{class:"label-note"},"* 請使用英數組成，最少 6 碼",-1)),xa=d(()=>a("label",null,"權限",-1)),ya=d(()=>a("span",{class:"label-note"},[o("說明 "),a("span",{class:"tooltip-text"},[o("一級權限: 可編輯權限，可新增修改刪除管理員。 "),a("br"),o(" 二級權限: 可新增修改刪除管理員。"),a("br"),o(" 三級權限: 無編輯管理員權限。")])],-1)),Sa={class:"flex gap-4"},Ca={__name:"BackendStaff",setup(m){const u=i([{staff_no:1,staff_name:"小王子",staff_account:"wst0001",staff_password:"123456",staff_permission:1,staff_datetime:"112/01/02 13:22:51",update_staff_no:1},{staff_no:2,staff_name:"小公舉",staff_account:"wst0002",staff_password:"123456",staff_permission:2,staff_datetime:"112/01/02 13:22:51",update_staff_no:1},{staff_no:3,staff_name:"小蕃薯",staff_account:"wst0003",staff_password:"123456",staff_permission:3,staff_datetime:"112/01/02 13:22:51",update_staff_no:1},{staff_no:4,staff_name:"小橘子",staff_account:"wst0004",staff_password:"123456",staff_permission:3,staff_datetime:"112/01/02 13:22:51",update_staff_no:1}]),n=i(null),$=l=>{n.value={...l,staff_password:""}},U=()=>{if(n.value&&n.value.staff_no!==void 0){const l=u.value.findIndex(e=>e.staff_no===n.value.staff_no);if(l!==-1){n.value.staff_datetime=B();const e={...u.value[l],...n.value};n.value.staff_password===""&&(e.staff_password=u.value[l].staff_password),u.value[l]=e,console.log("員工資料已儲存: ",u.value[l])}}else{console.error("沒有選定的員工來保存");return}n.value=null},A=()=>{n.value=null};function B(){const l=new Date,e=l.getFullYear()-1911,s=l.getMonth()+1,h=l.getDate(),P=l.getHours(),T=l.getMinutes(),E=l.getSeconds();return`${e}/${s.toString().padStart(2,"0")}/${h.toString().padStart(2,"0")} ${P.toString().padStart(2,"0")}:${T.toString().padStart(2,"0")}:${E.toString().padStart(2,"0")}`}const k=i(!1),y=i(""),c=i(null),D=l=>{y.value=`確定要刪除管理員 『 ${l.staff_name} 』 嗎？`,c.value=l,k.value=!0},z=()=>{if(c.value&&c.value.staff_no!==void 0){const l=u.value.findIndex(e=>e.staff_no===c.value.staff_no);l!==-1&&(u.value.splice(l,1),console.log("刪除員工:",c.value))}else console.error("沒有選定的員工來刪除");c.value=null,k.value=!1},I=()=>{k.value=!1},t=i({staff_name:"",staff_account:"",staff_password:"",staff_permission:""}),v=i({staff_account:!1,staff_password:!1}),Z=C(()=>/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,}$/.test(t.value.staff_account)),M=C(()=>/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,}$/.test(t.value.staff_password)),S=l=>{v.value[l]=!0},w=i(!1),N=()=>{if(!t.value.staff_name||!t.value.staff_account||!t.value.staff_password){alert("所有欄位必填 !");return}const l=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,}$/;if(!l.test(t.value.staff_account)||!l.test(t.value.staff_password)){alert("帳號和密碼不得小於 6 位數且必須包含英文及數字。");return}if(!t.value.staff_permission){alert("請選擇一個權限。");return}const e={staff_name:t.value.staff_name,staff_account:t.value.staff_account,staff_password:t.value.staff_password,staff_permission:t.value.staff_permission};u.value.push(e),console.log(t.value),t.value={staff_name:"",staff_account:"",staff_password:"",staff_permission:""},w.value=!1,v.value={staff_account:!1,staff_password:!1}},F=()=>{t.value={staff_name:"",staff_account:"",staff_password:"",staff_permission:""},v.value={staff_account:!1,staff_password:!1},w.value=!1};return(l,e)=>(r(),b("div",J,[a("div",K,[O,a("button",{onClick:e[0]||(e[0]=s=>w.value=!0),class:"btn-blue-s"},"+   新增")]),a("div",W,[X,(r(!0),b(q,null,H(u.value,s=>(r(),b("div",{class:"backend-table-body",key:s.staff_no},[a("div",aa,x(s.staff_name),1),a("div",ea,x(s.staff_account),1),a("div",sa,x(s.staff_permission),1),a("div",ta,[a("button",{onClick:h=>$(s)},"編輯",8,la),a("button",{onClick:h=>D(s)},"刪除",8,na)])]))),128)),n.value?(r(),b("div",oa,[a("div",fa,[a("div",da,[ua,a("label",null,[o("名稱 "),f(a("input",{type:"text",maxlength:"20","onUpdate:modelValue":e[1]||(e[1]=s=>n.value.staff_name=s),class:"input-backend",placeholder:"名稱"},null,512),[[p,n.value.staff_name]])]),a("label",null,[o("帳號 "),ia,f(a("input",{type:"text",maxlength:"20","onUpdate:modelValue":e[2]||(e[2]=s=>n.value.staff_account=s),class:"input-backend",placeholder:"帳號"},null,512),[[p,n.value.staff_account]])]),a("label",null,[o("新密碼 "),ca,f(a("input",{type:"text",maxlength:"20","onUpdate:modelValue":e[3]||(e[3]=s=>n.value.staff_password=s),class:"input-backend",placeholder:"若要變更密碼，請輸入新密碼"},null,512),[[p,n.value.staff_password]])]),a("div",null,[ra,pa,a("div",_a,[a("label",null,[f(a("input",{type:"radio",value:"1","onUpdate:modelValue":e[4]||(e[4]=s=>n.value.staff_permission=s)},null,512),[[_,n.value.staff_permission]]),o(" 一級 ")]),a("label",null,[f(a("input",{type:"radio",value:"2","onUpdate:modelValue":e[5]||(e[5]=s=>n.value.staff_permission=s)},null,512),[[_,n.value.staff_permission]]),o(" 二級 ")]),a("label",null,[f(a("input",{type:"radio",value:"3","onUpdate:modelValue":e[6]||(e[6]=s=>n.value.staff_permission=s)},null,512),[[_,n.value.staff_permission]]),o(" 三級 ")])])])]),a("div",{class:"backend-edit-modal-footer"},[a("button",{onClick:A,class:"btn-white-s"},"取消"),a("button",{onClick:U,class:"btn-blue-s"},"儲存")])])])):g("",!0),w.value?(r(),b("div",va,[a("div",ba,[a("div",ma,[ka,a("label",null,[o("名稱 "),wa,f(a("input",{type:"text",maxlength:"20","onUpdate:modelValue":e[7]||(e[7]=s=>t.value.staff_name=s),class:"input-backend",placeholder:"名稱"},null,512),[[p,t.value.staff_name]])]),a("label",null,[o("帳號 "),ha,f(a("input",{type:"text",maxlength:"20","onUpdate:modelValue":e[8]||(e[8]=s=>t.value.staff_account=s),onBlur:e[9]||(e[9]=s=>S("staff_account")),class:V([{"invalid-input":v.value.staff_account&&!Z.value},"input-backend"]),placeholder:"帳號"},null,34),[[p,t.value.staff_account]])]),a("label",null,[o("密碼 "),ga,f(a("input",{type:"text",maxlength:"20","onUpdate:modelValue":e[10]||(e[10]=s=>t.value.staff_password=s),onBlur:e[11]||(e[11]=s=>S("staff_password")),class:V([{"invalid-input":v.value.staff_password&&!M.value},"input-backend"]),placeholder:"密碼"},null,34),[[p,t.value.staff_password]])]),a("div",null,[xa,ya,a("div",Sa,[a("label",null,[f(a("input",{type:"radio",value:"1","onUpdate:modelValue":e[12]||(e[12]=s=>t.value.staff_permission=s)},null,512),[[_,t.value.staff_permission]]),o(" 一級 ")]),a("label",null,[f(a("input",{type:"radio",value:"2","onUpdate:modelValue":e[13]||(e[13]=s=>t.value.staff_permission=s)},null,512),[[_,t.value.staff_permission]]),o(" 二級 ")]),a("label",null,[f(a("input",{type:"radio",value:"3","onUpdate:modelValue":e[14]||(e[14]=s=>t.value.staff_permission=s)},null,512),[[_,t.value.staff_permission]]),o(" 三級 ")])])])]),a("div",{class:"backend-edit-modal-footer"},[a("button",{onClick:F,class:"btn-white-s"},"取消"),a("button",{onClick:N,class:"btn-blue-s"},"儲存")])])])):g("",!0),k.value?(r(),L(G,{key:2,message:y.value,onConfirm:z,onCancel:I},null,8,["message"])):g("",!0)])]))}},Ua=j(Ca,[["__scopeId","data-v-336761e2"]]);export{Ua as default};
