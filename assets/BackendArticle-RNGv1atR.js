import{_ as ee,r as p,x as r,c as g,d as k,f as e,F as te,i as le,P as s,Q as h,q as o,A as d,S as E,t as u,B as L,h as ae,s as ne,p as ie,k as se}from"./index-hnwowYte.js";import{_ as U}from"./eyes-5fz4K9cS.js";import{C as oe}from"./ConfirmDialog-nSzMpdjx.js";const c=y=>(ie("data-v-56fcc947"),y=y(),se(),y),ce={class:"backend-block-flex"},re={class:"backend-page-title"},de=c(()=>e("div",{class:""},"新聞文章",-1)),ue={class:"rounded-md shadow overflow-hidden"},_e=ne('<div class="backend-table-header" data-v-56fcc947><label class="backend-table-header-label col-span-3" data-v-56fcc947>新聞標題 </label><label class="backend-table-header-label col-span-3" data-v-56fcc947>新聞標題_英文 </label><label class="backend-table-header-label col-span-1" data-v-56fcc947>發布時間 </label><label class="backend-table-header-label col-span-1" data-v-56fcc947>功能 </label></div>',1),ve={class:"backend-table-body-label col-span-3"},pe={class:"backend-table-body-label col-span-3"},be={class:"backend-table-body-label col-span-1"},he={class:"backend-table-body-label col-span-1 flex justify-center gap-2"},fe=["onClick"],xe=c(()=>e("svg",{class:"icon-blue-hover-fill",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M16.3045 4.30255C17.2418 3.36529 18.7614 3.36529 19.6986 4.30255C20.6359 5.23981 20.6359 6.75941 19.6986 7.69666L18.7471 8.64814L15.353 5.25403L16.3045 4.30255Z",fill:"#6B7280"}),e("path",{d:"M13.656 6.95108L3.60156 17.0055V20.3996H6.99567L17.0501 10.3452L13.656 6.95108Z",fill:"#6B7280"})],-1)),ge=[xe],me=["onClick"],ke=c(()=>e("svg",{class:"icon-red-hover",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M4 7H20M10 11V17M14 11V17M5 7L6 19C6 19.5304 6.21071 20.0391 6.58579 20.4142C6.96086 20.7893 7.46957 21 8 21H16C16.5304 21 17.0391 20.7893 17.4142 20.4142C17.7893 20.0391 18 19.5304 18 19L19 7M9 7V4C9 3.73478 9.10536 3.48043 9.29289 3.29289C9.48043 3.10536 9.73478 3 10 3H14C14.2652 3 14.5196 3.10536 14.7071 3.29289C14.8946 3.48043 15 3.73478 15 4V7",stroke:"#6B7280","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),ye=[ke],we={key:0,class:"backend-edit-overlay"},Ce={class:"backend-edit-modal"},Ve={class:"backend-edit-modal-content backend-block-flex"},Ae={class:"backend-page-title"},Le=c(()=>e("img",{src:U,alt:"eyes"},null,-1)),$e={class:"input-backend-pic-flex"},Se=c(()=>e("label",null,[s(" 新聞圖片 "),e("span",{class:"label-note"},"* 畫質要清晰，圖片先壓縮再上傳")],-1)),Be={class:"w-1/2 cursor-pointer"},Me=["src"],Ee={class:"flex gap-4"},Ue={class:"w-full"},Ne={class:"label-note"},De={class:"w-full"},Ie={class:"label-note"},Pe={class:"flex gap-4"},Te={class:"w-full"},Re=c(()=>e("span",{class:"label-note"},"* 格式為 yyyy/mm/dd",-1)),He={class:"w-full"},je=c(()=>e("span",{class:"label-note"},"* 最多255字",-1)),Fe=c(()=>e("hr",{class:"backend-block-hr"},null,-1)),Oe=c(()=>e("div",{class:"backend-block-title"},"英文版",-1)),We={class:"flex gap-4"},ze={class:"w-full"},Ge={class:"label-note"},Ye={class:"w-full"},Ze={class:"label-note"},qe={key:1,class:"backend-edit-overlay"},Qe={class:"backend-edit-modal"},Je={class:"backend-edit-modal-content backend-block-flex"},Ke={class:"backend-page-title"},Xe=c(()=>e("img",{src:U,alt:"eyes"},null,-1)),et={class:"input-backend-pic-flex"},tt=c(()=>e("label",null,[s(" 新聞圖片 "),e("span",{class:"label-note"},"* 畫質要清晰，圖片先壓縮再上傳")],-1)),lt={class:"w-1/2 cursor-pointer"},at=["src"],nt={class:"flex gap-4"},it={class:"w-full"},st={class:"label-note"},ot={class:"w-full"},ct={class:"label-note"},rt={class:"flex gap-4"},dt={class:"w-full"},ut=c(()=>e("span",{class:"label-note"},"* 格式為 yyyy/mm/dd",-1)),_t={class:"w-full"},vt=c(()=>e("span",{class:"label-note"},"* 最多255字 ",-1)),pt=c(()=>e("hr",{class:"backend-block-hr"},null,-1)),bt=c(()=>e("div",{class:"backend-block-title"},"英文版",-1)),ht={class:"flex gap-4"},ft={class:"w-full"},xt={class:"label-note"},gt={class:"w-full"},mt={class:"label-note"},kt={__name:"BackendArticle",setup(y){const _=p([{article_no:1,article_title:"【媒體報導】勞動部長許銘春參訪誠諾",article_title_en:"(Press Report) Minister of Labor, Ming-Chun Hsu, Visits CNETC",article_pic:"/img/NewsView/news1.png",article_txt:"誠諾在2022年「促進中高齡及高齡者就業暨世代合作績優獎選拔活動」中脫穎而出，贏得「促進中高齡者及高齡者就業績優獎」，部長於今年8月16日南下參訪誠諾，親自體驗中高齡文章的工作場域，關心壯世代勞工朋友的工作情形。",article_txt_en:" CNETC stood out in the Selection of Outstanding Achievements in Promoting Employment of Middle-aged and Elderly Workers and Generational Cooperation in 2022, winning the Outstanding Achievement Award for Promoting Employment of Middle-aged and Elderly Workers. On August 16 of this year, the Minister visited CNETC, personally experiencing the working environment of middle-aged and elderly employees, and showing concern for the work conditions of workers from the silver generation.",article_date:"2023/08/18",article_link:"https://money.udn.com/money/story/11799/7378286",article_datetime:"112/01/02 13:22:51",staff_no:1},{article_no:2,article_title:"【媒體報導】榮獲第3屆「促進中高齡者及高齡者就業績優獎」",article_title_en:'(Press Report) CNETC Received the 3rd ""Outstanding Achievement Award for Promoting Employment of Middle-aged and Elderly Workers',article_pic:"/img/NewsView/news2.png",article_txt:"依中高齡文章需求，自主開發圖資系統及e化工具，透過青銀協學輔助中高齡文章查找資料及運用，並輔導其考取專業證照，提供系統化升遷路徑。",article_txt_en:' "In response to the needs of middle-aged and elderly employees, independent development of mapping systems and digital tools has been undertaken. These tools assist middle-aged and elderly workers in finding and utilizing information through a Young-Silver Generation Mutual Learning Program. Additionally, guidance is provided for them to obtain professional certifications, offering a systematic career advancement path."',article_date:"2023/11/30",article_link:"https://money.udn.com/money/story/11799/7378286",article_datetime:"112/12/31 13:22:51",staff_no:2}]),N=r(()=>i.value.article_title.length),D=r(()=>i.value.article_title_en.length),I=r(()=>i.value.article_txt.length),P=r(()=>i.value.article_txt_en.length),T=r(()=>a.value.article_title.length),R=r(()=>a.value.article_title_en.length),H=r(()=>a.value.article_txt.length),j=r(()=>a.value.article_txt_en.length),b=p(!1),$=(n,t,l,m)=>{const V=n.target.files[0];if(V){const A=URL.createObjectURL(V);Array.isArray(l)?l[t]=A:typeof l=="object"&&(l[m]=A)}},S=n=>{window.open(n,"_blank")},i=p(null),F=n=>{i.value={...n}},O=()=>{if(i.value&&i.value.article_no!==void 0){const n=_.value.findIndex(t=>t.article_no===i.value.article_no);if(n!==-1){i.value.article_date=z();const t={..._.value[n],...i.value};_.value[n]=t,console.log("文章資料已儲存: ",_.value[n])}}else{console.error("沒有選定的文章來保存");return}i.value=null},W=()=>{i.value=null};function z(){const n=new Date,t=n.getFullYear()-1911,l=n.getMonth()+1,m=n.getDate(),V=n.getHours(),A=n.getMinutes(),X=n.getSeconds();return`${t}/${l.toString().padStart(2,"0")}/${m.toString().padStart(2,"0")} ${V.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}:${X.toString().padStart(2,"0")}`}const w=p(!1),B=p(""),f=p(null),G=n=>{B.value=`確定要刪除管理員 『 ${n.article_title} 』 嗎？`,f.value=n,w.value=!0},Y=()=>{if(f.value&&f.value.article_no!==void 0){const n=_.value.findIndex(t=>t.article_no===f.value.article_no);n!==-1&&(_.value.splice(n,1),console.log("刪除文章:",f.value))}else console.error("沒有選定的文章來刪除");f.value=null,w.value=!1},Z=()=>{w.value=!1},a=p({article_no:M(),article_title:"",article_title_en:"",article_pic:"",article_txt:"",article_txt_en:"",article_date:"",article_link:""});function M(){return _.value.length===0?1:Math.max(..._.value.map(t=>t.article_no))+1}const v=p({article_no:!1,article_title:!1,article_title_en:!1,article_pic:!1,article_txt:!1,article_txt_en:!1,article_date:!1,article_link:!1});r(()=>!(!a.value.article_title||a.value.article_title.length>50)),r(()=>!(!a.value.article_txt||a.value.article_txt.length>200));const q=r(()=>/^\d{4}\/\d{2}\/\d{2}$/.test(a.value.article_date)),Q=r(()=>{const n=/^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/;return!!a.value.article_link&&n.test(a.value.article_link)});r(()=>!(!a.value.article_title_en||a.value.article_title_en.length>200)),r(()=>!(!a.value.article_txt_en||a.value.article_txt_en.length>600));const x=n=>{v.value[n]=!0},C=p(!1),J=()=>{if(!a.value.article_title){alert("標題是必填項目！");return}if(!a.value.article_txt){alert("文字是必填項目！");return}if(!a.value.article_date){alert("日期是必填項目！");return}if(!a.value.article_link){alert("連結是必填項目！");return}if(!a.value.article_title_en){alert("標題_英文是必填項目！");return}if(!a.value.article_txt_en){alert("文字_英文是必填項目！");return}const n={article_no:M(),article_title:a.value.article_title,article_title_en:a.value.article_title_en,article_pic:a.value.article_pic,article_txt:a.value.article_txt,article_txt_en:a.value.article_txt_en,article_date:a.value.article_date,article_link:a.value.article_link};_.value.push(n),console.log(a.value),a.value={article_no:"",article_title:"",article_title_en:"",article_pic:"",article_txt:"",article_txt_en:"",article_date:"",article_link:""},C.value=!1,v.value={article_title:!1,article_title_en:!1,article_pic:!1,article_txt:!1,article_txt_en:!1,article_date:!1,article_link:!1}},K=()=>{a.value={article_no:"",article_title:"",article_title_en:"",article_pic:"",article_txt:"",article_txt_en:"",article_date:"",article_link:""},v.value={article_title:!1,article_title_en:!1,article_pic:!1,article_txt:!1,article_txt_en:!1,article_date:!1,article_link:!1},C.value=!1};return(n,t)=>(g(),k("div",ce,[e("div",re,[de,e("button",{onClick:t[0]||(t[0]=l=>C.value=!0),class:"btn-blue-s"},"+   新增")]),e("div",ue,[_e,(g(!0),k(te,null,le(_.value,l=>(g(),k("div",{class:"backend-table-body",key:l.article_no},[e("div",ve,u(l.article_title),1),e("div",pe,u(l.article_title_en),1),e("div",be,u(l.article_date),1),e("div",he,[e("button",{onClick:m=>F(l)},ge,8,fe),e("button",{onClick:m=>G(l),class:"flex justify-center items-center"},ye,8,me)])]))),128)),i.value?(g(),k("div",we,[e("div",Ce,[e("div",Ve,[e("div",Ae,[s(" 最新消息 "),e("button",{class:h(["backend-look-pic-btn",{"backend-look-pic-btn-focus":b.value}]),onClick:t[1]||(t[1]=l=>b.value=!b.value)},[Le,s(" 圖片 ")],2)]),e("label",null,[s("編號 "),o(e("input",{type:"text",maxlength:"20","onUpdate:modelValue":t[2]||(t[2]=l=>i.value.article_no=l),class:"input-backend",placeholder:"編號",disabled:"",readonly:""},null,512),[[d,i.value.article_no]])]),e("div",$e,[Se,e("div",null,[e("input",{type:"file",onChange:t[3]||(t[3]=l=>$(l,null,i.value,"article_pic")),class:"input-backend"},null,32)]),o(e("div",Be,[e("img",{src:i.value.article_pic,alt:"image Preview",class:"pic",onClick:t[4]||(t[4]=()=>S(i.value.article_pic))},null,8,Me)],512),[[E,b.value]])]),e("div",Ee,[e("div",Ue,[e("label",null,[s("標題 "),e("span",Ne,"* 最多 50 字 ("+u(N.value)+" / 50)",1),o(e("textarea",{type:"text",maxlength:"50","onUpdate:modelValue":t[5]||(t[5]=l=>i.value.article_title=l),class:"input-backend min-h-[120px]",placeholder:"標題"},null,512),[[d,i.value.article_title]])])]),e("div",De,[e("label",null,[s("文字 "),e("span",Ie,"* 最多 200 字 ("+u(I.value)+" / 200)",1),o(e("textarea",{type:"text",maxlength:"200","onUpdate:modelValue":t[6]||(t[6]=l=>i.value.article_txt=l),class:"input-backend min-h-[120px]",placeholder:"文字"},null,512),[[d,i.value.article_txt]])])])]),e("div",Pe,[e("div",Te,[e("label",null,[s("日期 "),Re,o(e("input",{type:"text",maxlength:"20","onUpdate:modelValue":t[7]||(t[7]=l=>i.value.article_date=l),class:"input-backend",placeholder:"日期"},null,512),[[d,i.value.article_date]])])]),e("div",He,[e("label",null,[s("新聞連結 "),je,o(e("input",{type:"text",maxlength:"200","onUpdate:modelValue":t[8]||(t[8]=l=>i.value.article_link=l),class:"input-backend",placeholder:"新聞連結"},null,512),[[d,i.value.article_link]])])])]),Fe,Oe,e("div",We,[e("div",ze,[e("label",null,[s("標題_英文 "),e("span",Ge,"* 最多 200 字 ("+u(D.value)+" / 200)",1),o(e("textarea",{type:"text",maxlength:"200","onUpdate:modelValue":t[9]||(t[9]=l=>i.value.article_title_en=l),class:"input-backend min-h-[200px]",placeholder:"標題_英文"},null,512),[[d,i.value.article_title_en]])])]),e("div",Ye,[e("label",null,[s("文字_英文 "),e("span",Ze,"* 最多 600 字 ("+u(P.value)+" / 600)",1),o(e("textarea",{type:"text",maxlength:"600","onUpdate:modelValue":t[10]||(t[10]=l=>i.value.article_txt_en=l),class:"input-backend min-h-[200px]",placeholder:"文字_英文"},null,512),[[d,i.value.article_txt_en]])])])])]),e("div",{class:"backend-edit-modal-footer"},[e("button",{onClick:W,class:"btn-white-s"},"取消"),e("button",{onClick:O,class:"btn-blue-s"},"儲存")])])])):L("",!0),C.value?(g(),k("div",qe,[e("div",Qe,[e("div",Je,[e("div",Ke,[s(" 新增文章 "),e("button",{class:h(["backend-look-pic-btn",{"backend-look-pic-btn-focus":b.value}]),onClick:t[11]||(t[11]=l=>b.value=!b.value)},[Xe,s(" 圖片 ")],2)]),e("div",et,[tt,e("div",null,[e("input",{type:"file",onChange:t[12]||(t[12]=l=>$(l,null,a.value,"article_pic")),class:"input-backend"},null,32)]),o(e("div",lt,[e("img",{src:a.value.article_pic,alt:"image Preview",class:"pic",onClick:t[13]||(t[13]=()=>S(a.value.article_pic))},null,8,at)],512),[[E,b.value]])]),e("div",nt,[e("div",it,[e("label",null,[s("標題 "),e("span",st,"* 最多 50 字 ("+u(T.value)+" / 50) ",1),o(e("textarea",{type:"text",maxlength:"50","onUpdate:modelValue":t[14]||(t[14]=l=>a.value.article_title=l),onBlur:t[15]||(t[15]=l=>x("article_title")),class:h([{"invalid-input":v.value.article_title&&!a.value.article_title},"input-backend min-h-[120px]"]),placeholder:"標題"},null,34),[[d,a.value.article_title]])])]),e("div",ot,[e("label",null,[s("文字 "),e("span",ct,"* 最多 200 字 ("+u(H.value)+" / 200) ",1),o(e("textarea",{type:"text",maxlength:"50","onUpdate:modelValue":t[16]||(t[16]=l=>a.value.article_txt=l),onBlur:t[17]||(t[17]=l=>x("article_txt")),class:h([{"invalid-input":v.value.article_txt&&!a.value.article_txt},"input-backend min-h-[120px]"]),placeholder:"文字"},null,34),[[d,a.value.article_txt]])])])]),e("div",rt,[e("div",dt,[e("label",null,[s("日期 "),ut,o(e("input",{type:"text",maxlength:"20","onUpdate:modelValue":t[18]||(t[18]=l=>a.value.article_date=l),onBlur:t[19]||(t[19]=l=>x("article_date")),class:h([{"invalid-input":v.value.article_date&&!q.value},"input-backend"]),placeholder:"日期"},null,34),[[d,a.value.article_date]])])]),e("div",_t,[e("label",null,[s("新聞連結 "),vt,o(e("input",{type:"text",maxlength:"200","onUpdate:modelValue":t[20]||(t[20]=l=>a.value.article_link=l),onBlur:t[21]||(t[21]=l=>x("article_link")),class:h([{"invalid-input":v.value.article_link&&!Q.value},"input-backend"]),placeholder:"新聞網址"},null,34),[[d,a.value.article_link]])])])]),pt,bt,e("div",ht,[e("div",ft,[e("label",null,[s("標題_英文 "),e("span",xt,"* 最多 200 字 ("+u(R.value)+" / 200)",1),o(e("textarea",{type:"text",maxlength:"200","onUpdate:modelValue":t[22]||(t[22]=l=>a.value.article_title_en=l),onBlur:t[23]||(t[23]=l=>x("article_title_en")),class:h([{"invalid-input":v.value.article_title_en&&!a.value.article_title_en},"input-backend min-h-[200px]"]),placeholder:"標題_英文"},null,34),[[d,a.value.article_title_en]])])]),e("div",gt,[e("label",null,[s("文字_英文 "),e("span",mt,"* 最多 600 字 ("+u(j.value)+" / 600) ",1),o(e("textarea",{type:"text",maxlength:"600","onUpdate:modelValue":t[24]||(t[24]=l=>a.value.article_txt_en=l),onBlur:t[25]||(t[25]=l=>x("article_txt_en")),class:h([{"invalid-input":v.value.article_txt_en&&!a.value.article_txt_en},"input-backend min-h-[200px]"]),placeholder:"文字_英文"},null,34),[[d,a.value.article_txt_en]])])])])]),e("div",{class:"backend-edit-modal-footer"},[e("button",{onClick:K,class:"btn-white-s"},"取消"),e("button",{onClick:J,class:"btn-blue-s"},"儲存")])])])):L("",!0),w.value?(g(),ae(oe,{key:2,message:B.value,onConfirm:Y,onCancel:Z},null,8,["message"])):L("",!0)])]))}},Vt=ee(kt,[["__scopeId","data-v-56fcc947"]]);export{Vt as default};
